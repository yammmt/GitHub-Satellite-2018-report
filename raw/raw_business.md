# [RAW] [GitHub Satellite Tokyo 2018](https://githubsatellite.com/) (Day 2: business)

聴講しつつ聞いたことを殴り書いておくファイル

## 基調講演

公家 尊裕 (GitHub), ジェイソン・ワーナー (GitHub)

### Satellite Tokyo 用ロゴ

- Tokyo のイメージを描いた
- 富士山
- 東京タワー
- 桜を branch にして表現
- 絵の人気があるので後日配るかも
  - GitHub 社員見掛けたら "Satellite Tokyo のあのロゴできた？" と聞いてみよう

### GitHub の背景

- ユーザー推移の話は前日と同じ内容
- 日本は中国やインドと並んでトップグローイングカントリー

### 国内 IoT

- 国内 IoT 市場は 2017 年に 6.2 兆円
  - 例えば電力自由化以降電力会社を切り替えるとスマートメーターがつく
  - 電力のスマートメーターは 30 分おきに使用状況が送信される
  - 数値見ると共働きとか子供いるなとか帰宅時間とか炙り出せる
  - 重要なのは集めたデータをどう解析してどんなサービスにしてユーザーに返すか
- 国内 IoT 市場は 2022 年には 12.5 兆円との試算
- 家電とか業務用調理器具にも組み込まれて故障時 or 故障予測時に近くの担当者を割り当てるとか
- **HW のデータをどうやって SW で分析するか**

### コグニティブ/AI

- 2017 年 274 億円
- 2022 年 2.947 億円
- 大量の可能性から可能性の高いものをピックアップ
- これも様々なデータをどう分析してどんなサービスを提供するかという話
- サンフランシスコでは SW 開発者の奪い合い状態
  - 需要急増に伴い給料も上昇

### じゃあすべてがハッピーなの？

- 経産省予測では 2030 年に IT 人材が 79 万人不足する
  - 毎年 4-5 万人不足者が増えていく
  - どうでも良いけどスライド内画像のエディタのテーマは monokai
- 勤務時間でカバーする方法はもう無理
- ツール使って効率化進める方法がある
- 国外の開発者を取り込んでいく方法がある
  - GitHub は 65% の社員がリモート
    - GitHub 以外のツールも使っている
    - 日本の社員でも今回の Satellite で初めて会った人も複数名
  - リモート開発環境の整備
- GitHub は開発者のコラボレーションにより品質向上, 革新的な SW 作成ができると信じている
  - 過去に OSS の時代で起こってきたこと
    - クラウドだと求めるものの頻度が上がっていて競争激化

### Enterprise

- 会社のセキュリティポリシーで GitHub 引っかかるって話が多い
  - 10 人に話すと 4-5 人はそう言う
  - 日本のユーザーの 95% 以上は GHE ユーザー

### ジェイソン

- SW が世界を食べている
  - もはやソフトウェア企業からイノベーション企業に
- 今日の企業は今までにない速度でイノベーションするしかない
- 一億以上のコードが近代的な車の中で実行されている
- イノベーションが具体的にどういうことか理解しよう
- 優秀な SW カンパニーになるには？
  - プロダクトのマーケティングを速く安価に
  - 世界中な人材不足の中でどうやってバランスを取るかが近代的な会社の課題

### GitHub の責任

- データ侵害を防ぐ
- コンプライアンス準拠しつつイノベーション促進
- OSS コミュニティへのサポート
- セキュリティ事例毎度あるけど自動化できたらどうでしょう？
  - token の流出を防げたらどうでしょう
- developer が考えることを自動化できたらどうでしょう
  - これがバランスを取るということ

### コード革命

- GitHub はコミュニティであり、真の価値は連携が取れるようになったこと
- 各社が OSS コミュニティが何年にもわたってやってきたことをできるようにした
- 開発者/社員が簡単にコラボレーションして SW が開発しやすく

### cloud 2.0

- システムのセキュリティにクラウドを使う
- 統合やワークフローの管理に GitHub は役立つ
- 今日の各組織は様々なことに答える, 責任も担う

### GitHub

- 過去 10 年は情報共有が大事であることがわかってきているだろう
- GitHub は人材を雇用し、セキュリティを担保することにも貢献する

### ウェイン・ジン

- GitHub の具体的な将来については NDA 締結あれば聞いて
  - 外向けに具体的な日程は出せない
- セキュリティ重要
- どのようにプラットフォームをエコシステムの中で活用するかが重要
  - 他のツールとの親和性
- developer の experience が重要

### GitHub Vision

- The software development platform
- SW 開発に尽力できる環境を作る
- OSS でもそうでなくともシームレスになるよう
- 日本では Enterprise 多い
  - OSS の利益を受けるにはベストでない
- オンプレだろうがクラウドだろうが価値を引き出すことのできる機能が出てくる

### データ

- Privacy に配慮
- セキュリティ脆弱性には一定のパターンが出てきている
- 2017 の IEEE paper では依存関係管理を自動化する企業は自動化しない企業と比べて **60% も脆弱性のリスクが低くなる**
- 脆弱性診断に機械学習使う

### eco system

- GHE はただの VCS だけでない
- 最近 Checks API を出した
- サードパーティのツールも取り入れて最高の環境を構築する

### developer

- profile/dashboard/experience
- 同じ開発フローの中で開発できる
- IDE でコード作ってフィードバック受けるまで一貫した形に
- スキルを見るのに GitHub を見るようになっている
  - 企業内だろうと OSS へのコミットだろうと
  - 企業内でもコミットログ見れば何やってるかどの程度の能力かわかる
- dashboard 見れば朝一番にどれからやればいいかわかるよね
  - 必要な情報を瞬時に把握できるように
- 開発者がコードを書くことに集中する

### 総括

- 今後もどんどん新機能出すよ
- ここまでで **15 分遅延**

___

## ゲスト基調講演：DMM.comのGitHub EnterpriseとCircleCI Enterpriseの活用例

唐沢 陽介 (株式会社DMM.comラボ)

### about

- DMM 転職二年目
- 一年くらい前に GHE 導入をメインで
- 最近は Circle CI のサポート多め
- 技術者サポート業務中心
  - 開発環境バージョンアップ
  - サーバー環境
- 今日は Circle CI 中心に GHE 一年三ヶ月使った感想も話す

### 社内での活用状況

- すべてのサービスで GitHub を使っているわけではない
  - 残りは BitBucket オンプレ版
- Git サーバー導入済みなのにどうして GHE に
  - 開発環境改善チームが GitHub 試験運用したら噂聞いたエンジニアがどんどん乗り込んできた
    - みんな GitHub 使いたかった
- Jenkins 主流だったが導入中途半端だったので合わせて Circle CI も導入した

### 社内サービス

- GHE は先月 330 人がアクティブ
- CircleCI 80 人
- ZenHub Enterprise に 30 人
  - 複数レポジトリの issue/PR をまとめて見る
- SideCI オンプレミスに 20 人
  - レビュー支援
- サービスは全部 AWS 上に構築
  - GHE は社内でも良いが
  - AWS 推奨のサービスが多い
  - 開発環境と本番環境とでリージョン分離
  - 内部フローは Git-Flow

### 運用ルール

- GHE アクセスはファイアウォール引いて事業所とサービスからのみ接続
- レポジトリは基本 Public
  - 垢ない人でも見れるように
- ユーザーや org の作成は申請すれば自由
  - org 自由は反省している (後述)

### 利用パターン

#### Git のブランチモデル

- チームの人数や依存関係に依る部分が多い
- 最初に案内するのは Git-Flow/GitHub-Flow
- `feature` に変更あると CircleCI
- `develop` は検証環境, 変更次第 CircleCI で自動テスト, テスト通れば検証環境 (`master`) にデプロイ
- `master` に変更があると CircleCI で自動テスト, 本番環境にデプロイ
- 単純なモデルに慣れているとそこからの改良が思いつき易い
- GitHub-Flow も `feature` 変更時に CircleCI が自動テスト
- `master` に変更入ると CircleCI に自動テスト
  - タグうつと本番環境にデプロイされる

#### CircleCI (ver. 2)

- Rails アプリだと Rspec/RuboCop/デプロイを任せる
- すばやくする

##### Docker Executor

- Docker ベースのビルドで二回目以降は高速
- スケールアウト容易
  - 負荷集中でビルドが詰まる
  - 再実行早い
- ローカル開発用の cli ツールが使える
  - 簡単な構文エラーならすぐに
  - コンフィグファイル書く時間が大きく短縮できる
- ビルドするための前提条件が並ぶのでレポジトリの構成を一ファイルで把握できる

##### ダウンロードしたファイルはキャッシュする

- キャッシュから復元してキャッシュに保存すると `bundle` みたいなのが非常に高速化
- CircleCI だとキャッシュにキー指定して保存する仕組みがある

##### paralelis を使った自動テストの並列化

- CircleCI の `parallelism` 指定すると並列実行される
- テストが独立していることが前提

##### Workflow を使った自動テストと静的解析の並列化

- テストと静的解析は依存関係にない (はず) ので容易に並列実行できる
  - コマンド自体違うし
- 単体のビルドが短くなって快適

##### Machine Executor 非推奨

- オンプレ版だとビルドのたびに裏で EC2 インスタンスが起動するのでビルド開始までが遅い
- 事前に EC2 起動しておくこともできるが起動数の変更にサービス再起動が求められて怠い
- docker compose のファイルをそのまま使おうとするとこの要求が沸く

##### 総括

- CircleCI は速度を意識してないとすぐに遅くなる
- `jobs ruby filename:config.yml` で検索すると他人の設定が拾える
  - 他所のレポジトリから良いやつを拾ってこよう
  - 言語同じだとだいたい設定も同じに

### ドキュメント管理

- Pages 使ってる
  - Markdown 書いて
  - CircleCI が HTML に変換して
  - Pages や S3 で公開
- GitBook/VuePress などが使われている

### ZenHub

- すべてのタスクは issue に登録する
- すべてのレポジトリの課題を一元管理できる
- これ使うと GitHub に閉じこもって開発が完結して便利

### 導入後一年経って

- 新規サービスでは GHE/CircleCI 採用してデプロイやテスト自動化が進む
- サーバーやユーザの管理が要らなくなるのでとっかかりやすくなる  
  - 裏側に管理者いるけど利用者は意識しなくて良い
- `.circleci/config.yml` に動作要件書くので全体像の把握が楽
- GHE 内検索で実践的なサンプル拾える

### 悩み

- 現実世界とリンクしてしまってチーム外との会話が生まれないまま
- 言語環境ゴールがチームごとに全然違う
- 開始前に文化とかゴールとかを相談して明確にすればよかった
- org 80 個くらい沸いた
  - 組織変更多いしチーム単位で作っていったら増殖した
  - 他の org で何やってるかまったく見えなくなるのでソーシャル感薄れる

### 対策

- いいレポジトリに :star:
  - 嬉しい :joy:

___

## ゲスト基調講演/パネルディスカッション：ソフトウェア開発の変遷と、これから

及川 卓也 (フリーランス技術アドバイザー), 大倉 香織 (株式会社サイバーエージェント), 小林 篤 (株式会社ディー・エヌ・エー), 松野 徳大 (LINE株式会社)

### about

#### 大倉

- 2006 年サイバーエージェント入社, AmebaBlog 中心としてサービスのネットワークやインフラ関連
- (産休明け) 2012 年以降は開発に集中できる環境構築側
  - admin 視点

#### 小林

- 2011/3 DeNA 入社
- ゲームプラットフォーム, オートモーティブの開発責任者
- 執行役員システム本部本部長
- 隣にいる松野氏と元同僚
- インフラもオンプレからクラウドに変わってゆく

#### 松野

- 2011 LINE (に統合されて今はないライブドア) 入社
- 広告 PF 開発チーム担当マネージャー
- Perl のモジュールとかいっぱい書いてた
  - 日本で一番書いた, 世界でも二三番目くらいの量を書いた

#### 及川

- MS/Google でプロダクトマネージャやってた
- Qiita 運営会社に一年くらいいた
- 今は独立してフリーランス

### 10 年を振り返って

- 昔は CVS/SVN 使ってた人が多い
- Git 前後で社内開発大きく変わった ?
  - Git か否かより GitHub の影響が強い
    - コミュニケーション楽になった
  - 手元でコミットできるのが嬉しい
  - 移動中に作業できるので便利
    - オフライン作業できる
- Slack 使ってますか ?
  - GitHub 通知受けるのは全社的に使われている (大倉, 小林)
  - chatbot に話しかけると社内業務できるように (小林)
- 言語トレンド
  - Perl/Java の会社統合して Java が多い (松野)
    - 他 Swift/kotlin/JavaScript とかも
  - Ruby/Go 多い (小林)
    - 多人数開発だと Java も増えてる
  - Go が多いが Java も多い (大倉)
    - ここ二三年でリリースしたものは Go, Java から Go へ
- 世間トレンド見てる ?
  - StackOverflow のまとめ見ると金融系多い (松野)
    - Perl 採用しようとすると若い人はもう取れない
  - 会社内で厳密な決まりはない (小林)
    - 最近は Go 多い
  - 最近 Go ばっかなので Go 書く人採用多い (大倉)
    - リーダーが決める側面
- AI とか流行ってるけどここ最近で何が起きた ?
  - インフラの考え方が大きく変わった (小林)
    - AWS は 10 年前では控えめだった
  - インフラでもクラウド使うしオンプレにもクラウド技術入ってきたりする (及川)
- AI とか機械学習とか
  - 広告には機械学習エンジニア (松野)
    - 10 年前の ad tech と比べて自由広告減った
  - 10 年前にはそうは呼んでいなかったがアルゴリズムは使っていた (小林)
    - ベイジアンフィルターで不適切な用語を警告して閾値超えたら人がチェックとか
  - Google 検索とか人工知能だけどそういう呼び方してないよね (及川)
  - NVIDIA が人工知能のトップ企業になるとはまったく思わなかった (及川, 小林)
- 組織面の変化
  - 事業部ごとに責任者が技術選定 (大倉)
  - 事業領域シフトに伴って全体担える人を用意 (小林)
  - 細かいプロジェクト単位でリーダー明文化するようになった (松野)
  - Tech Lead. とか CTO とか肩書明示するようになったよね (及川)
    - 日本企業が SW 開発を意識するようになった
- 逆に期待外れに終わったものは？
  - セカンドライフ終わったよね
- 注目する技術
  - ITS 領域で日本は世界にかなり遅れている (小林)
    - 都市設計や土木にも関わってくる
  - 日本は技術作れても応用が弱く, 横の連携が取れていない (及川)
  - 自動化したいのに API 非公開で導入できない場合がある (大倉)
    - スクレイピングゴリ押しとか
  - システムが UI 的にフレンドリーじゃなかったり API なかったりで連携ができなくなる場面が多い (及川)
    - HR Tech 掲げる新しい会社だとこのあたり考慮されているので今後に期待
  - 入ってくるデータが多く応用する方法がホット (松野)
    - 気軽に大きなクラスタ作って運用
    - データ扱うにも数字に強い人が必要
      - データサイエンティスト積極採用してそれなりに採れている印象

### 10 年後はどうなる？

- 人がプログラムを書くのはいつどこまで？インフラどこまで見続ける？
  - VS IntelliCode プレビュー版出たよね
  - 自動生成流行っているよね
  - 同じコードに対して書く量は減ったが機能要件とかコンポーネント依存関係とかは人力だろう (松野)
    - テキストベースのものは減るだろう
  - ビジネスロジック以外を書く場面は大きく減った (小林)
    - 機械がコーディングするとは 20 年前から言われていた
    - 自動運転は安全のために研究されていて, つまりは人間がコードを書くとバグが発生する
- プログラミング必修化に際して 10 年後は機械がコーディングするから覚えなくて良いと言う人がいる, これからは何を学べば良いのか (及川)
  - プロトコル理解して効率化範囲見る (小林)
    - Rails みたいなの出たから裏側のプロトコル見ない人が増えたのは悪
  - 言語学ぶのを全員がやる必要はなさそう (松野)
    - Scratch/Minecraft とかでも良いのでは
  - 小二に Scratch はまだ早いかな (大倉)
    - Ruby の絵本読ませたほうが良さそう
  - ビジュアル系言語だと VCS との相性が悪く人とのコラボレーションが煩雑 (及川)
- インフラから見て機械化推進された後のインフラの立ち位置は？ (及川)
  - ネットワークやセキュリティ周りは見続ける, 抽象化によってかえって問題発生時に対応する技術力が求められる (大倉) 
    - コード書くか技術を理解するか
    - イメージし辛い
    - 組み合わせによって生じる穴は自分たちで見そう
    - 最初の設計は人
- SW により制御可能な世界はどう影響を与えるか, Docker とかどう？
  - 積極的な活用でなく今後の検討課題 (小林)
    - 自分たちでコンテナ管理せずともクラウドで管理してくれたり
    - SW 複雑化に伴って準備中
  - 活用しなきゃと思うが物理マシンが良いという人がいる (松野)
    - コンテナによるオーバーヘッド減らしたいという人も
  - Docker は数年前から, CircleCI 2.0 での採用にあわせてより使っていこうという流れはある (大倉)
- Google/MS は下位レイヤーもホワイトボックスな自社製に置き換えてきた
- チーム開発の将来は？ AR/VR は？リモートワークは？
  - バーチャル空間は将来に影響を与えそう？
  - 現状のゴーグルの大きさじゃまだ難しい (大倉)
    - ドラゴンボールのスカウターレベルまで縮まればいけるだろう
  - 隣に座っている人にも Slack で会話するのでリモートでも行けそう (小林)
    - 微妙なコンテキストの補完にはハングアウトとか
    - 結局顔合わせることも必要
      - ビジネスパートナーと話す際の第一歩は対面
  - 個人単位のリモートワークは基本的には許可していない (松野)
    - 拠点いくつかあって拠点間でやり取りする際には LINE 経由が多い
    - ビデオ通話も定期的にやられている
    - ビデオ会議だと細かいニュアンスが落ちる
      - 通訳入れても落ちる
      - 対面で通訳入れたほうが通じる
    - VR 発達してくればなにかソリューション出てきてリモートワークやり易くなるかも
  - リモートワークに必要なコンテキストの問題は VR が解決するかもしれないが, 音声品質悪いと片言になってしまったりする (及川)
- GitHub リモートワーク率高いしノウハウ公開してほしい
  - チャットでの言い回しとか
  - snow でビジネス
    - 昔ハングアウトにあったんだけど
    - ノーメイクでできたり

### 最後にひとこと

- 今後も技術によって便利になっていくだろう, 作る側として活動していけるのは楽しみ (松野)
- (聞き逃し) (小林)
- オートメーション化について情報共有したいので気軽に声掛けて (大倉)

___

## GitHubと共に学生を育てる方法

古橋 大地 (青山学院大学教授) (@mapconcierge)

### about

- 昨年の大学一年生は 1998 生まれ
  - Google が生まれた後
- あと 10 年すれば GitHub-Native な学生になるだろう
- **文系の** 学部で GitHub 使っている

- 最初に教える際には樹形図みたいなもの見せる
- GitHub は情報を継承するプラットフォーム

### 地図

- 専門は GitHub の地図を作る (GeoJSON/TopoJSON)
- Gist に `.geojson` 投げると自動レンダリングまでしてくれる
- 他にも point/line/polygon もレンダリング
- OpenStreetMap
- Nov 15, 2017 に使い方について The GitHub Blog に

### 教育内容

- 例えば XYZ タイル画像のデータ仕様を図化しろとか
  - 256 のメルカトル図法を拡大しつつとか
  - データを作ることは要求しないが仕組みを考える
- 技術者と一緒に業務ができることを目指す
  - 色々な技術を触る
  - 人のいない夜中にドローンレースとか
- 最先端の技術をどのように社会実装するか

### Open Street Map

- 2008 年から活動
- GitHub 含めた様々なサービスに地理情報を提供
  - Pokemon GO とか日立とかテスラとか多数
    - テスラは昨年ナビに
    - Pokemon GO は最初は Google Map だったが
- Wikipedia を参考に誰でも参加可能な形に
- 商用利用可能
  - GitHub とか一銭も払ってなさそう
- MS も OSM 支援してくれていた
  - 許諾や資金
  - 自動運転地図として OSM 採用
- 500 万人ほどの貢献者

### 授業

- 海外メンバとコミュニケーションする必要があるので GitHub 使う
- タスク管理は Issue
  - GitHub 使わないとこの輪に入れない
- 人道支援も赤十字などと
- 文書は Markdown
  - **途上国でも先進国でも Markdown を普段遣い**
    - ここ数年で強い危機感があるので Word 禁止にした
    - Permalink の重要性
- Slack/Dropbox とかも
  - LINE でも Markdown 書けとか
- 公開すると学生に適度なプレッシャー
  - 外部からレビュー飛ぶわけで
- 外部公開する Web サイトは Pages
- 国土地理院の地理院地図を Pages ごと Fork して私の地理院地図に
  - 地理院は GitHub 活用している

### ウェブサイト

- Jekyll でテンプレ
- 学部の新しいページもこれ

### 教育

- Git の仕組みは [Git-it](https://github.com/jlord/git-it-electron) で経験する
- 飴と鞭
  - 頑張ったらステッカーあげる
- "文系だからコミュニティの輪に入れない" は損失
- プレゼン資料は SpeakerDeck
- GitHub の profile が履歴書代わりになる
  - 生やせ草
  - 活動履歴は B4 から作っても間に合わない
- 最近は Projects も使ってる
- GitHub は外の社会と大学をつなぐ架け橋
- 'Publish or Die!!'
  - Private Repository 有料なので

___

## SlerがGitHub Enterpriseを使ったら

原口 猛 (株式会社セゾン情報システムズ)

### about

- Web フロントエンド担当
- Jenkins おじさん
- 従業員数連結で 778 名

### 導入

- 事業部・開発製品・サービスごとにソースコード管理が乱立
- 顧客のコード扱う都合クラウド管理できない
- 公式ドキュメントや事例が多く運用までが非常に簡単
- 段階的導入: まずはインフルエンサーに触らせる
- GitHub 人気による引力
  - 使うと戻れなくなる

### 運用

- 運用チームひとりで二年弱でトラブル 0 件
- モジュールアップデートしかしないので運用工数極わずか
- Jenkins でデイリービルドや静的解析
- GHE/Jenkins から Slack に通知

### 効果

- テスト前の開発工程に CI によるテストを導入
  - 戻り工数大幅削減
  - コードを個人所有する時間が減った
    - チームでコードをもつと課題の早期発見や有識者からの助言が :+1:
    - 開発に対する考えが変わってゆく
- レビュー意識が変わった
  - かつては有識者に教えてもらう場だった
  - 相互学習のための場になった
  - 二回で伝わらなければ Face to Face に切り替える

### まとめ

- GHE は文化を変えるためのプラットフォーム
- マクニカ/GitHub Japan の手厚いサポートに頼ろう

### 事例

- ペア & モブプロによるシングルブランチ運用
  - プルリクベースでなく各自でレビューする
  - `master` 一本でいける
  - ブランチ数を減らす目的
  - JUnit/sonarqube/Se による自動テスト
- 社内向けポータルに Pages
  - Slack で Hubot 叩いて Webhook 発火して Jenkins でテストしてデプロイ
  - ガントチャートもテキストから吐ける

### GitHub 社製品の支援について

根本 竜也 (マクニカネットワークス)

- 100 社以上への導入実績
- 最近は組み込みとか金融系でも使われ始めた
- .com ユーザー多ければ思考停止ですんなり使える
  - 多くの企業では比較したり効果出したりするが
- ハンズオントレーニングもやってる
- GHE 専任チームがある
  - だめなら GitHub 本社に協力仰ぐ
  - 定時外サポートほしければ本社に
- CircleCI も担当
- 今後もモダンな開発環境に関わるツールはラインアップ増やす
- アンケートよろしく

___

## GitHub Marketplaceと、開発生産性を向上させる幾つかのSaaSのご紹介

角 幸一郎 (SideCI株式会社) (@sumyapp)

### introduction

- もともと開発者としてバリバリ書いていた
- 最近コード書いてないので芝生えてない
- "クラウド誕生" 本の出版が 9 年前
- SW はお金で買えるが開発リソースはお金では買えない
- 開発者は仕事効率化のために遠慮なく課金したい
- 少数のチームでやってるので時間は貴重, SaaS は積極投資
  - この会社では 40 個以上使ってる

### GitHub Marketplace

- 購入は GitHub で完結, 決済も統合されている
  - Enterprise だとどうなの？
  - GitHub あての領収書だから稟議ゴニョろう

### Useful apps

#### Coveralls

- テストカバレッジが見易い
  - 行/ファイル/時系列などの単位
  - README へのバッチ

#### SideCI

- RuboCop/Checkstyle などの解析
- PR と連動して発火
- 誤検知無視してクローズする機能
- プロジェクト固有ルール足せる
  - `.yml` で書く

#### CircleCI

- 購入プラン次第で並列実行や分散実行できる
- パイプライン組める

#### Dependabot

- Dependency の自動アップデート
  - `Gemfile.lock` を元にライブラリを自動更新
- 自動的に PR 作る
  - テスト可否を事前に判定できるのが嬉しい

#### Rollbar

- Slack 通知から詳細確認する
- スタックトレースやユーザの環境も見れる
  - サーバーに ssh 投げて `/var/log` 漁るのが不要に
- 値段も $50 以下と激安
- 例外のトレンド把握や検索やフィルタリングができる

#### Zenhub

- Chrome/Firefox 拡張でスムーズに利用
- ベロシティ計測
- リリース日予測

### Marketplace 出店

- CideCI は平均 2,000 人/月の流入
- 世界各国から使用可能
- Marketplace 経由の売上はローンチ四ヶ月で 10 倍

### announcement

- 今日付けで SideCI -> SIder に製品名変更

___

## GitHubを軸とした開発プロセスのリプレイス

大平 哲也 (株式会社スタートトゥデイテクノロジーズ)

### about

- 半年くらいかけて開発システムのリプレースした
- 主に自動化の話
- ゾゾスーツ来てこなかった
- B2C 系で 10 年ほどサービス開発
- 現職ではシステムリプレイスの技術的なリード担当
- 本領は app エンジニア
- 2017/08 に入社

### 開発組織の状況

- 基本内製
- 100 名強のエンジニア群
- 慢性的な人手不足
- リプレースプロジェクト本格始動は 2017/11

#### リプレース以前

- 長年積み重ねてきた技術的負債
- 基盤がレガシー
- システム基盤に合わせてプロセスも一気に見返そう
- 改修は大規模

### 改修の方向性

- 頼れるものには頼る
- 極力自動化する

### GitHub Business Hosted

- 以前は社内サーバーで Git
  - サーバー落ちる
  - リリースきつい
  - 重い
  - 運用追いつかない
  - SaaS/PaaS との連携難
- GitHub のビジネスプランのクラウド版
  - サーバー管理丸投げできる
- Enterprise と同じ価格でサーバー管理丸投げできるぶん楽だろう

### 開発プロセス

- Oracle 製の Wercker を CI として利用
  - docker image 上で動く
    - CircleCI 2.0 もそうなのでそっちで良いような気もする
- その他色々つけてる

### 自動化

- テスト
- 品質チェック
- 自動生成
- デプロイ

#### テスト

- DSL の内容も見る

#### コード品質

- push 拾って coverage/smell/duplications 拾う
- PR 補助
- SonarCloud で諸々可視化
  - KPI 設けて一定以下の場合はレビュー通過させない

#### コード自動生成

- 仕様は一箇所にしたいし手で実装するのも減らしたい
- Swagger/Open API 採用
  - REST API のインターフェース仕様を記述
  - yaml/json で仕様定義
- Swagger 仕様通りに動く Mock API 作成
- API 実装に必要なコードテンプレを自動生成
  - ビジネスロジックは手動実装
- Spec ドキュメントも作成
  - API 実行もできるので簡単に動作確認とれて便利
- API テストツール Postman 用の設定ファイルを自動生成
  - 最近 Postman 人気上昇中らしい
  - Postman CUI で叩くツールが GitHub に上がっている
- 負荷テストツール JMeter 用のテストシナリオを自動生成
  - 最近の JMeter はコマンドラインで走る

#### パッケージ

- JAR 吐いて Maven レポジトリに登録するの怠い
- JitPack だと GitHub に登録されている Java コードを自動で JAR にする

#### デプロイ

- 作成済の Docker Image を Kubernates に apply
  - Kubernates 有能だが今回は割愛

### 総括

- GitHub は開発者がいかに楽しく開発するかを考えてくれている会社

___

## 企業開発に役立つGitHubの最新機能

池田 尚史 (GitHub)

### GitHub とは

- The software development platform
- どんな開発が必要になっても GitHub を活用できるように
- 10 年間に書かれたコード量は 500TB
- 昨年一年間のコミット数は 15 億
- 10 年間でマージされたプルリクは 1 億
- 85% のプルリクは Private
  - おおよそ企業

### 企業利用

- Business Hosted は SAML 使える
  - 鯖は米国
- Enterprise はオンプレ
  - 監査ログや運用監視
- どちらもエンドユーザー視点では同じ機能

### 機能

- GitHub Flow
- プルリク
- ツール連携

### 企業利用に役立つ機能 (おおよそ過去半年)

#### Platform

- Security Alert/Dependency Graph
- Checks API
- Outlook
  - 今は .com のみ

#### Administration

- Archieving Repositories
- Legal Hold
  - 通常 GHE はレポジトリ削除後 90 日経つと完全に削除される
  - ディスクからのレポジトリ削除を防ぐ
    - 特定の org/user に紐付く
    - 訴訟対策にデータもつとか
- High Availability & Backup
  - primary 落ちた際に secondary を昇格させるとか
- Mixed Auth
  - 認証基盤を混ぜる
  - 派遣社員に LDAP 回避するとか
- Hot Patch
  - システム落とさずにパッチ当てる
- 二段階認証

#### Org/Team

- Nested Teams
- Approval flows
  - TEam メンバ追加時に approval 入る
- Team Discussions
  - 朝のミーティングの議事録だとか
- Permissions
  - メンバの初期権限
  - Fork 可否
  - 二段階認証強制
- Protected Branches
  - レビュワー必須とか CI 強制とか署名必須とか特定のチームだけがマージとか

#### Developer

- Projects 自動化
- 進捗ビジュアライズ
  - 緑コンプリート
  - 紫 WIP
  - グレーノータッチ
- 総じて Projects は使える機能になってきた
- issue templates 複数
  - UI は現在 .com のみだが Enterprise 版は近日中に追加
- ナビゲーション追加
  - Ruby/Go/JavaScript/Python など対応
  - 今後も増える
- コメント編集履歴
  - .com のみだが Enterprise 版にも近日中に

### 変更を追うには

- GitHub Changelog

___

## GitHub Enterpriseアドミンパネルディスカッション

テレル・ブルーマ (GitHub), 伊集院 圭介 (ブラザー工業株式会社), 井内 聡 (フリュー株式会社), サマーズ ハリス 和弘 (楽天株式会社)

### about

#### 伊集院

- ブラザーのソフトウェアエンジニア
- 現在は T シャツに直接印刷するようなプリンタを開発中

#### 井内

- フリューでプリクラの開発中

#### サマーズハリス

- 楽天でインフラ担当

### GHE 導入時点

- なぜ導入した？
  - インフラを自動的にデプロイする仕組みにうまく合致 (サマーズハリス＠楽天)
    - 最初の試験運用は簡単にできた
  - システム的な問題と SW 開発者の思いによる (伊集院＠ブラザー)
    - システムの保守が切れるタイミングで更新難しそうだったし Win でしか使えないシステムだったのでリプレース
    - 開発者が GitHub をそのまま好んでいた, 他社が GHE 導入に積極的な時期だったので SlideShare とか見て憧れていた
      - かっこいいし導入が社員のやる気にも繋がる
        - Octocat :octocat: かわいいのも理由の一つ
  - 導入は一年三ヶ月くらい前, SVN + Redmine でレビューするのは煩雑で効率化したかった (井内＠フリュー)
    - 世界的な情勢見ても SVN でなく Git だった
    - コードクラウドに置きたくない会社なのでオンプレな GHE
- 導入時に苦労したことは？どう乗り越えた？
  - SVN から載せ替え, ログの移行は簡単だったが外部参照できなくて苦労したが submodule で擬似的に置き換え (井内＠フリュー)
    - レポジトリの構造は変化した
    - Git 導入時の学習にも苦労した
  - マイナーなシステムからの移行だったので情報が少なかった (伊集院＠ブラザー)
    - ツール途中で止まるのでしょうがなく手作業したり
    - Git (Hub) に関心のないエンジニアも大量にいて彼らに移行を促すのが大変だった
    - 多くのチームは自分たちで調べてプルリク使いたいって進んでくれた
      - 自発的に進んだので教育にはそれほど苦労せず
  - 興味が出次第使わせたがライセンス管理面倒, 各プロジェクトがクローズ前提で運営されていたのでトークン隠せとかした (サマーズハリス＠楽天)
    - 要はポリシー

### GHE 導入後

- 導入後に何が変わった？
  - GHE 移行後にブランチ戦略を自発的に見つけてきて方向決めてくれた (伊集院＠ブラザー)
    - プルリク使えと言わなかったけど各チームが勝手に使い始めてレビュー文化が勝手に定着した
    - 自分たちで動いてより良くしていくという文化ができた
  - チームに直接編集依頼してたけどプルリク投げるだけになった, 互いにチーム横断してプルリクが飛び交う (サマーズハリス＠楽天)
  - コードオープンになって要求や仕様やコードの共有ができるようになった (井内＠フリュー)
- 管理していて困ったことは？
  - SW ではまったく困らなかった(伊集院＠ブラザー)
    - 管理者権限もっていると全部見えてしまうので権限正しいか確認できない
    - ssh でクローンしないとならない
      - ssh 知らない開発者結構いる
  - サーバートラブルは皆無, Git の勉強コスト高めだった (井内＠フリュー)
    - うっかり他人の変更消すとか
    - レビュー必須になったぶん緊急時の対応が遅くなった
      - 先にマージして後からレビューする場合がある
  - 権限管理利用にインターフェース設定したのにアップデートしたら消えた (サマーズハリス＠楽天)
    - Let's Encrypt 使えなかったり
- 管理者から見て GHE の良い点は？
  - 安定していて落ちない, 日本語サポート対応して頂ける (井内＠フリュー)
  - 安定していて落ちない (サマーズハリス＠楽天)
    - Docker 内だから動くだろと思ったのに落ちる場合がある
    - VM で動かしてるのに全く落ちない, 電源入れるだけ
    - ドキュメンテーション読み易いのでユーザーに直接投げられる
- ユーザーの反応は？
  - 良好, 高速に作業できる, 社内から隔離された社内ネットワークで作業する場合があり, Git 故にそれに対するコミットが新たにできるようになった, Git 管理なので検索製高くコードの共有ができる (伊集院＠ブラザー)
    - デバイスに関するコードは検索しても見つからない
  - 使うと戻れなくなる (サマーズハリス＠楽天)
  - レポジトリ跨いだ検索ができる, 非推奨関数使ってる箇所を一斉検索できた, 使うと戻れなくなる (井内＠フリュー)

### Q&A

- 運用楽とのことだがユーザー監視したり統計とったりって部分はなにか工夫してる？
  - 統計は見れるページがあるが自社モニタリングシステムに投げるなら設定弄って投げる (サマーズハリス＠楽天)
- 導入する人にアドバイスを
  - プルリクは採用する大きなメリットになる (井内＠フリュー)
  - 競合とちゃんと比べても良い, それでも結局安定性などで GHE に帰結する (伊集院＠ブラザー)
    - 質問 1-2h で返ってくる
    - 多機能

___

## 閉会

- Satellite は毎年会場変わるので来年日本でやるかはわからない
- できなくとも似たようなイベントは開催したいのでよろしく
