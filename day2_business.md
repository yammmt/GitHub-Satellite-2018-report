# [GitHub Satellite Tokyo](https://githubsatellite.com/) Day2: Business

## 概要

- 2018/6/13 (水), 10:00-17:00, TOC 五反田メッセ
- 参加者の六割程度は私服
  - 若いほど私服率上がっていた印象
  - クールビズ程度のスーツ (風味) が散見された
    - シャツはストライプ入ってるとか青くなってるとか

### スポンサー出展

- 前日と変化なし
- 配布されるステッカーがいくつか増えた
  - GitHub Satellite シール三種
  - CircleCI の日本限定シール一種
- キーホルダーご自由にお取り下さい状態になってた
  - 再利用できるものでないし要は在庫処分であろう

### 飲食物

- 前日と変化なし
  - 実質朝ごはん

### セッション

- 午前は時間超過が相次いだが午後は平和だった

### 他

- shop のステッカーは会場時点で三種類が品切れ
  - 前日に売り切ったっぽい
  - 最終的には四種類品切れ
- 手土産が若干増えた
  - LINE 社のモバイルポケット
  - KDDI/ブラザー社の Enterprise 導入事例がご自由にお取り下さい状態
- **手提げが蛍光色で光ってかっこいい**

___

## 基調講演

公家 尊裕 (GitHub), ジェイソン・ワーナー (GitHub)

### GitHub の背景 (公家)

- ユーザー推移の話は前日と同じ内容
- 日本は中国やインドと並んでトップグローイングカントリー

### 国内 IoT 市場

- 国内 IoT 市場は 2017 年に 6.2 兆円規模 (2022 年には 12.5 兆試算)
  - 例えば電力自由化以降電力会社を切り替えるとスマートメーターがつく
    - 電力のスマートメーターは 30 分おきに使用状況が送信される
    - 数値見ると共働きとか子供いるなとか帰宅時間とか炙り出せる
- 近未来には家電とか業務用調理器具にも組み込まれて故障 (予測) 時に近くの担当者を自動で割り当てるとか
- **HW のデータをどうやって SW で分析するかが重要になる**

### コグニティブ/AI 領域

- 2017 年 274 億円 -> 2022 年 2.947 億円予測
- IoT と同様に **データをどう分析するかが重要**
- サンフランシスコでは既に SW 開発者の奪い合い状態で給与水準も上昇中

### 市場は拡大すれどもすべてがハッピーではない

- 経産省予測では 2030 年に IT 人材が **79 万人** 不足する
  - 毎年 4-5 万人不足者が増えていく状況
    - a
- カバーする方法は四種類考えられる: 
  - 勤務時間でカバーする方法 -> 規制入ってるし不可能
  - ツール使って効率化進める方法
  - 国外の開発者を取り込んでいく方法
    - GitHub は 65% の社員がリモート勤務
      - 日本の社員でも今回の Satellite で初めて会った人も複数名
      - リモート開発環境の整備
  - 前項 3-4 の組み合わせ (GitHub はそうしている)
- GitHub は開発者のコラボレーションにより品質向上および革新的な SW 作成ができると信じている
  - 過去に OSS の時代で起こってきたことそのまま

### Enterprise 版の背景

- 会社のセキュリティポリシーで GitHub.com 使えないパターンが多い
  - 10 人に話すと 4-5 人はそう言う
- 日本のユーザーの 95% 以上は GHE ユーザー

### 現況 (ジェイソン)

- 今日では SW が世界を食べている
  - 例えば一億以上のコードが近代的な車の中で実行されている
- 今日の企業は今までにない速度でイノベーションするしかない
- 優秀な SW カンパニーになるには？
  - プロダクトのマーケティングを速く安価に
  - **世界中な人材不足** の中でどうやってバランスを取るかが近代的な会社の課題

### GitHub の責任

- データ侵害を防ぐ
- コンプライアンス準拠しつつイノベーション促進する
- OSS コミュニティへのサポート
- セキュリティ事例毎度あるけど自動化できたらどうでしょう？
  - token の流出を防げたらどうでしょう？
- developer が考えることを自動化できたらどうでしょう？

### コード革命

- GitHub はコミュニティであり、真の価値は連携が取れるようになったこと
- 開発者/社員が簡単にコラボレーションして SW を開発しやすく

### cloud 2.0

- システムのセキュリティにクラウドを使う
- 統合やワークフローの管理に GitHub は役立つ

### GitHub

- 過去 10 年は情報共有が大事であることがわかってきているだろう
- GitHub は人材を雇用し、セキュリティを担保することにも貢献する

### (ウェイン・ジン)

- GitHub の具体的な将来については NDA 締結あれば聞いて
  - 外向けに具体的な日程は出せない
- セキュリティが重要
- PF をエコシステムの中でどのように活用するかが重要
- developer の experience が重要

### GitHub Vision

- The software development platform
- SW 開発に尽力できる環境を作る
- オンプレだろうがクラウドだろうが価値を引き出すことのできる機能が出てくる

### データ

- Privacy に配慮
- セキュリティ脆弱性には一定のパターンが出てきている
- 2017 の IEEE paper 曰く, 依存関係管理を自動化する企業は自動化しない企業と比べて **60% も脆弱性のリスクが低くなる**
- 脆弱性診断に機械学習使う

### eco system

- サードパーティのツールも取り入れて最高の環境を構築する

### developer

- 同じ開発フローの中で開発できる利点
- IDE でコード作ってフィードバック受けるまで一貫した形にする
- **開発者のスキルを見るのに GitHub を見るようになっている**
  - 企業内だろうと OSS への貢献だろうと同じ
- dashboard 見れば朝一番にどれからやればいいかわかるよね
  - 必要な情報を瞬時に把握できるように
- **開発者がコードを書くことに集中する**

___

## ゲスト基調講演：DMM.comのGitHub EnterpriseとCircleCI Enterpriseの活用例

唐沢 陽介 (株式会社DMM.comラボ)

### about

- DMM 転職二年目
- 一年くらい前に GHE 導入をメインで担当
- 最近は Circle CI のサポート多め
- 技術者サポート業務中心
  - 開発環境バージョンアップやサーバー環境

### 社内での GHE 活用状況

- すべてのサービスで GitHub を使っているわけではない
- 開発環境改善チームが GitHub 試験運用したら噂聞いたエンジニアが乗り込んできた
  - みんな潜在的に GitHub 使いたかった
- あわせて Jenkins を CircleCI に置き換え
  - Jenkins 環境難しく導入が中途半端だった

### 社内サービスの利用状況

先月のデータは以下

| service           | # of active users |
|:------------------|------------------:|
| GHE               | 330               |
| CircleCI          |  80               |
| ZenHub Enterprise |  30               |
| SideCI            |  20               |


- サービスは全部 AWS 上に構築
  - AWS 推奨のサービスが多い
  - 開発環境と本番環境とでリージョン分離
- 内部フローは Git-Flow

### 運用ルール

- GHE アクセスは事業所とサービスからのみ
- レポジトリは基本 Public
  - 垢ない人でも見れるように
- ユーザーや org の作成は申請すれば自由だが org 自由は反省点

### 利用パターン

#### Git のブランチモデル

##### 概要

- チームの人数や依存関係に依る部分が多い
- 最初に案内するのは Git-Flow/GitHub-Flow
- 単純なモデルに慣れているとそこからの改良が思いつき易い

##### Git-Flow

- `feature` に変更あると CircleCI
- `develop` は検証環境, 変更次第 CircleCI で自動テスト, テスト通れば検証環境 (`master`) にデプロイ
- `master` に変更があると CircleCI で自動テスト, 本番環境にデプロイ

##### GitHub-Flow

- `feature` 変更時に CircleCI が自動テスト
- `master` に変更入ると CircleCI が自動テスト
  - タグうつと本番環境にデプロイされる

#### CircleCI (v2)

- 例えば Rails アプリだと Rspec/RuboCop/デプロイを任せる
- 高速化重要

##### Docker Executor

- Docker ベースのビルドで二回目以降は高速
- スケールアウト容易
  - ビルド詰まってからの再実行早い
- ローカル開発用の cli ツールが使える
  - 簡単な構文エラーならすぐに検出
  - コンフィグファイル書く時間が大きく短縮できる
- ビルドするための前提条件が並ぶので **レポジトリの構成を一ファイルで把握できる**

##### ダウンロードしたファイルはキャッシュする

- キャッシュから復元してキャッシュに保存すると `bundle` みたいなのが高速化
- CircleCI だとキャッシュにキー指定して保存する仕組みがある

##### paralelis を使った自動テストの並列化

- CircleCI の `parallelism` 指定すると並列実行される
- **テストが独立していることが前提**

##### Workflow を使った自動テストと静的解析の並列化

- テストと静的解析は依存関係にない (はず) ので容易に並列実行できる

##### Machine Executor 非推奨

- オンプレ版だとビルドのたびに裏で EC2 インスタンスが起動するのでビルド開始までが遅い
  - 事前に EC2 起動しておくこともできるが起動数の変更にサービス再起動が求められて怠い

##### Tips

- `jobs ruby filename:config.yml` で検索すると他人の設定が拾える
  - 他所のレポジトリから良いやつを拾ってこよう

### ドキュメント管理

1. Markdown 書いてコミットすると
1. CircleCI が HTML に変換して
1. CircleCI がデプロイして Pages や S3 で公開される

- GitBook/VuePress などが使われている

### ZenHub

- すべてのタスクは issue に登録する運用
- ZenHub ではすべてのレポジトリの課題を一元管理できる
- GitHub に篭って開発全部できるようになるので便利

### 導入後一年経って

- 新規サービスでは GHE/CircleCI 採用してデプロイやテスト自動化が進む
- サーバーやユーザの管理が要らなくなるのでとっかかりやすくなる  
  - 裏側に管理者いるけど利用者は意識しなくて良い
- `.circleci/config.yml` に動作要件書くので全体像の把握が楽
- GHE 内検索で実践的なサンプル拾える

### 悩み

- org/team が現実世界とリンクしてしまってチーム外との会話が生まれないまま
- 言語/環境/ゴールがチームごとに全然違う
- 開始前に文化とかゴールとかを相談して明確にすればよかった
- org 80 個くらい沸いた
  - 他の org で何やってるかまったく見えなくなるのでソーシャル感薄れる

### 対策

- いいレポジトリに積極的に :star: 投げる
  - もらうと嬉しい :joy:

___

## ゲスト基調講演/パネルディスカッション：ソフトウェア開発の変遷と、これから

及川 卓也 (フリーランス技術アドバイザー), 大倉 香織 (株式会社サイバーエージェント), 小林 篤 (株式会社ディー・エヌ・エー), 松野 徳大 (LINE株式会社)

### about

#### 大倉

- 2006 年サイバーエージェント入社, AmebaBlog 中心としてサービスのネットワークやインフラ関連
- (産休明け) 2012 年以降は開発に集中できる環境構築側

#### 小林

- 2011/3 DeNA 入社
- ゲームプラットフォーム, オートモーティブの開発責任者
- 執行役員システム本部本部長

#### 松野

- 2011 LINE (に統合されて今はないライブドア) 入社
- 広告 PF 開発チーム担当マネージャー
- Perl のモジュールとかいっぱい書いてた
  - 日本で一番書いた, 世界でも二三番目くらいの量を書いた

#### 及川

- MS/Google でプロダクトマネージャやってた
- Qiita 運営会社に一年くらいいた
- 今は独立してフリーランス

### 10 年を振り返って

- 昔は CVS/SVN 使ってた人が多い
- Git 前後で社内開発大きく変わった ?
  - Git か否かより GitHub の影響が強い
    - コミュニケーション楽になった
  - 手元でコミットできるのが嬉しい
  - オフライン作業できるので便利
- Slack 使ってますか ?
  - 全員使っている
- 言語トレンド
  - Perl/Java の会社統合して Java が多い (松野)
    - 他 Swift/kotlin/JavaScript とかも
  - Ruby/Go 多い (小林)
    - 多人数開発だと Java も増えてる
  - Go が多いが Java も多い (大倉)
    - ここ二三年でリリースしたものは Go, Java から Go へ
- 世間トレンド見て採用してる ?
  - StackOverflow のまとめ見ると金融系多い (松野)
    - Perl 採用しようとすると若い人はもう取れない
  - 会社内で厳密な決まりはない (小林)
    - 最近は Go 多い
  - 最近 Go ばっかなので Go 書く人採用多い (大倉)
- AI とか流行ってるけどここ最近で何が起きた ?
  - インフラの考え方が大きく変わった (小林)
    - AWS は 10 年前では控えめだった
  - インフラでもクラウド使うしオンプレにもクラウド技術入ってきたりする (及川)
- AI とか機械学習とかどう？
  - 広告には機械学習エンジニア (松野)
    - 10 年前の ad tech と比べて自由広告減った
  - 10 年前にはそうは呼んでいなかったがアルゴリズムは使っていた (小林)
    - ベイジアンフィルターで不適切な用語を警告して閾値超えたら人がチェックとか
  - Google 検索とか人工知能だけどそういう呼び方してないよね (及川)
  - NVIDIA が人工知能のトップ企業になるとはまったく思わなかった (及川, 小林)
- 組織面の変化は？
  - 事業部ごとに責任者が技術選定 (大倉)
  - 事業領域シフトに伴って全体担える人を用意 (小林)
  - 細かいプロジェクト単位でリーダー明文化するようになった (松野)
  - Tech Lead. とか CTO とか肩書明示するようになったよね (及川)
    - 日本企業が SW 開発を意識するようになった
- 逆に期待外れに終わったものは？
  - セカンドライフ終わったよね
- 注目する技術
  - ITS 領域で日本は世界にかなり遅れている (小林)
    - 都市設計や土木にも関わってくる
  - 日本は技術作れても応用が弱く, 横の連携が取れていない (及川)
  - 自動化したいのに API 非公開で導入できない場合がある (大倉)
    - スクレイピングゴリ押しとか
  - システムが UI 的にフレンドリーじゃなかったり API なかったりで連携ができなくなる場面が多い (及川)
    - HR Tech 掲げる新しい会社だとこのあたり考慮されているので今後に期待
  - 入ってくるデータが多く応用する方法がホット (松野)
    - 気軽に大きなクラスタ作って運用
    - データ扱うにも数字に強い人が必要
      - データサイエンティスト積極採用してそれなりに採れている印象

### 10 年後はどうなる？

- 人がプログラムを書くのはいつどこまで？インフラどこまで見続ける？
  - VS IntelliCode プレビュー版出たよね
  - 自動生成流行っているよね
  - 同じコードに対して書く量は減ったが機能要件とかコンポーネント依存関係とかは人力だろう (松野)
  - ビジネスロジック以外を書く場面は大きく減った (小林)
    - 機械がコーディングするとは 20 年前から言われていた
    - 人間がコードを書くとバグが発生する
- プログラミング必修化に際して 10 年後は機械がコーディングするから覚えなくて良いと言う人がいる, これからは何を学べば良い？
  - プロトコル理解する (小林)
    - Rails みたいなの出たから裏側のプロトコル見ない人が増えたのは悪
  - 言語学ぶのを全員がやる必要はなさそう (松野)
    - Scratch/Minecraft とかでも良いのでは
  - 小二に Scratch はまだ早いかな (大倉)
    - Ruby の絵本読ませたほうが良さそう
  - ビジュアル系言語だと VCS との相性が悪く人とのコラボレーションが煩雑 (及川)
- インフラから見て機械化推進された後のインフラの立ち位置は？ (及川)
  - ネットワークやセキュリティ周りは見続ける必要がある, 抽象化によって **かえって問題発生時に対応する技術力が求められる** (大倉) 
    - コード書くか技術を理解するか
    - イメージし辛い
    - 組み合わせによって生じる穴は自分たちで見そう
    - 最初の設計は人
- SW により制御可能な世界はどう影響を与えるか, Docker とかどう？
  - 積極的な活用でなく今後の検討課題 (小林)
    - 自分たちでコンテナ管理せずともクラウドで管理してくれたり
    - SW 複雑化に伴って準備中
  - 活用しなきゃと思うが物理マシンが良い場面もある (松野)
  - Docker は数年前から, CircleCI 2.0 での採用にあわせてより使っていこうという流れはある (大倉)
- チーム開発の将来は？ AR/VR は？リモートワークは？
  - VR/AR は現状のゴーグルの大きさじゃまだ難しい (大倉)
    - ドラゴンボールのスカウターレベルまで縮まればいけるだろう
  - 隣に座っている人にも Slack で会話するのでリモートでも行けそう (小林)
    - 微妙なコンテキストの補完にはハングアウトとか
    - 結局顔合わせることも必要
      - ビジネスパートナーと話す際の第一歩は対面
  - 個人単位のリモートワークは基本的には許可していない (松野)
    - 拠点いくつかあって拠点間でやり取りする際には LINE 経由が多い
    - ビデオ通話も定期的に実施
    - ビデオ会議だと細かいニュアンスが落ちるのが難点
    - VR 発達してくればなにかソリューション出てきてリモートワークやり易くなるかも
  - リモートワークに必要なコンテキストの問題は VR が解決するかもしれないが, 音声品質悪いと片言になってしまったりする (及川)
- GitHub 社はリモートワーク率高いしノウハウ公開してほしい
  - チャットでの言い回しとか
  - snow をビデオ会議に使うとか
    - 自宅勤務時にノーメイクパジャマで会議できると良いよね

___

## GitHubと共に学生を育てる方法

古橋 大地 (青山学院大学教授) (@mapconcierge)

### about

- 昨年の大学一年生は 1998 生まれの Google-Native
- あと 10 年すれば GitHub-Native な学生になる
- **文系の** 学部で GitHub 使っている
- GitHub は情報を継承するプラットフォーム

### GitHub と地図情報

- Gist に `.geojson` 投げると自動レンダリングまでしてくれる
  - 他にも point/line/polygon もレンダリング
- Nov 15, 2017 に使い方について The GitHub Blog に掲載された

### 教育内容

- 例えば XYZ タイル画像のデータ仕様を図化しろとか
  - データを作ることは要求しないが仕組みを考える
- **技術者と一緒に業務ができることを目指す**
  - 色々な技術を触る
    - 人のいない夜中にドローンレースとか
- 最先端の技術をどのように社会実装するか考える

### Open Street Map

- 2008 年から活動中
- GitHub 含めた様々なサービスに地理情報を提供
- Wikipedia を参考に誰でも参加可能な組織えを目指す
- 商用利用可能
  - GitHub とか一銭も払ってないような？
- MS も OSM 支援してくれていた
  - 許諾や資金
  - 自動運転地図として OSM 採用
- 500 万人ほどの貢献者がいる

### 授業

- 海外メンバとコミュニケーションする必要があるので GitHub 使う
- タスク管理は Issue
- 文書は Markdown 必須
  - **途上国でも先進国でも Markdown を普段使いしている**
    - この傾向強く現状に強い危機感があるので **Word 禁止にした**
    - Permalink の重要性を体感する
- Slack/Dropbox とかも使う
- 公開すると学生に適度なプレッシャー掛けられる
  - 外部からレビュー飛ぶわけで
- 外部公開する Web サイトは Pages 利用
- 国土地理院の地理院地図を Pages ごと Fork して私の地理院地図に改造
  - 国土地理院は GitHub をうまく活用

### 教育

- Git の仕組みは [Git-it](https://github.com/jlord/git-it-electron) で経験する
- 飴と鞭
  - 頑張ったらステッカーあげる
- "文系だからコミュニティの輪に入れない" は損失
- プレゼン資料は SpeakerDeck に公開する
- **GitHub の profile が履歴書代わりになる**
  - 芝生やせ
  - 活動履歴は B4 から作っても間に合わない
- GitHub は外の社会と大学をつなぐ架け橋

___

## SlerがGitHub Enterpriseを使ったら

原口 猛 (株式会社セゾン情報システムズ)

### about

- Web フロントエンド担当の Jenkins おじさん
- 会社の従業員数は連結で 778 名

### GHE 導経緯

- 事業部・開発製品・サービスごとにソースコード管理が乱立した
- 顧客のコード扱う都合クラウド管理できない
- GHE は公式ドキュメントや事例が多く運用までが非常に簡単
- 段階的導入としてまずはインフルエンサーに触らせる
- GitHub 人気による引力
  - **使うと戻れなくなる**

### 運用

- 運用チームひとりで **二年弱でトラブル 0 件**
- モジュールアップデートしかしないので運用工数極わずか
- Jenkins でデイリービルドや静的解析する
- GHE/Jenkins から Slack に通知飛ばす

### 効果

- テスト前の開発工程に CI によるテストを導入
  - 戻り工数大幅削減
  - コードを個人所有する時間が減った
    - チームでコードをもつと課題の早期発見や有識者からの助言が :+1:
    - 開発に対する考えが変わってゆく
- レビュー意識が変わった
  - かつては有識者に教えてもらう場だったが相互学習のための場になった
  - **二回で伝わらなければ Face to Face に切り替える**

### まとめ

- GHE は文化を変えるためのプラットフォーム
- マクニカ/GitHub Japan の手厚いサポートに頼ろう

### 事例

- ペア & モブプロによるシングルブランチ運用
  - プルリクベースでなく各自でレビューする
  - ブランチが `master` 一本でいけて単純
- 社内向けポータルに Pages 使用
  - Slack で Hubot 叩いて Webhook 発火して Jenkins でテストしてデプロイ

### GitHub 社製品の支援について

根本 竜也 (マクニカネットワークス)

- 100 社以上への導入実績
- 最近は組み込みとか金融系でも使われ始めた
- .com ユーザー多ければ思考停止ですんなり使える
- ハンズオントレーニングもやってる
- GHE 専任チームがある
  - だめなら GitHub 本社に協力仰ぐ
  - 定時外サポートほしければ本社に
- 親和性高い CircleCI も担当
- 今後もモダンな開発環境に関わるツールはラインアップ増やす

___

## GitHub Marketplaceと、開発生産性を向上させる幾つかのSaaSのご紹介

角 幸一郎 (SideCI株式会社) (@sumyapp)

### introduction

- もともと開発者としてバリバリ書いていた
- 最近コード書いてないので芝生えてない
- "クラウド誕生" 本の出版が 9 年前
- **SW はお金で買えるが開発リソースはお金では買えない**
- **開発者は仕事効率化のために遠慮なく課金したい**
- 少数のチームでやってるので時間は貴重, SaaS は積極投資
  - この会社では 40 個以上の SaaS を使用中

### GitHub Marketplace

- 購入は GitHub で完結, 決済も統合されている
  - GitHub あての領収書だから稟議ゴニョろう

### Useful apps

#### Coveralls

- テストカバレッジが見易い
  - 行/ファイル/時系列などの単位
  - README へのバッチ表示機能

#### SideCI

- RuboCop/Checkstyle などの解析
- PR と連動して発火
- 誤検知無視してクローズする機能
- プロジェクト固有ルール足せる
  - `.yml` で書く

#### CircleCI

- 購入プラン次第で並列実行や分散実行できる
- パイプライン組める

#### Dependabot

- Dependency の自動アップデート
  - `Gemfile.lock` を元にライブラリを自動更新
- 自動的に PR 作る
  - テスト可否を事前に判定できるのが嬉しい

#### Rollbar

- Slack 通知から詳細確認する
- スタックトレースやユーザの環境も見れる
  - サーバーに ssh 投げて `/var/log` 漁るのが不要になる
- 例外のトレンド把握や検索やフィルタリングができる

#### Zenhub

- Chrome/Firefox 拡張でスムーズに利用
- ベロシティ計測
- リリース日予測

### Marketplace 出店

- CideCI は平均 2,000 人/月の流入
- 世界各国から使用される
- Marketplace 経由の売上はローンチ四ヶ月で 10 倍

___

## GitHubを軸とした開発プロセスのリプレイス

大平 哲也 (株式会社スタートトゥデイテクノロジーズ)

### about

- 半年くらいかけて開発システムのリプレースした
- 講演者は B2C 系で 10 年ほどサービス開発
- 現職ではシステムリプレイスの技術的なリード担当
- 本領は app エンジニア
- 2017/08 に入社

### 開発組織の状況

- 基本内製
- 100 名強のエンジニア群
- 慢性的な人手不足
- リプレースプロジェクト本格始動は 2017/11

#### リプレース以前

- 長年の技術的負債が蓄積
- 基盤がレガシー
- システム基盤に合わせてプロセスも一気に見返そう
- 改修は大規模

### 改修の方向性

- 頼れるものには頼る
- 極力自動化する

### GitHub Business Hosted

- 以前は社内サーバーで Git していたが...
  - サーバー落ちる
  - リリースきつい
  - 重い
  - 運用追いつかない
  - SaaS/PaaS との連携難しい
- Enterprise と同じ価格でサーバー管理丸投げできるぶん楽だろう

### 開発プロセス

- Oracle 製の Wercker を CI として利用
  - docker image 上で動く
    - CircleCI 2.0 もそうなったなのでそっちで良いような気もする
- その他色々稼働

### 自動化

- テスト
- 品質チェック
- 自動生成
- デプロイ

#### テスト

- DSL の内容も見る

#### コード品質

- push 拾って coverage/smell/duplications 拾う
- SonarCloud で諸々可視化
  - KPI 設けて一定以下の場合はレビュー通過させない

#### コード自動生成

- 仕様は一箇所にしたいし手で実装するのも減らしたい
- Swagger/Open API 採用
  - REST API のインターフェース仕様を記述
  - yaml/json で仕様定義
- Swagger 仕様通りに動く Mock API 作成
- API 実装に必要なコードテンプレを自動生成
  - ビジネスロジックは手動実装
- Spec ドキュメントも作成
  - API 実行もできるので簡単に動作確認とれて便利
- API テストツール Postman 用の設定ファイルを自動生成
  - Postman CUI で叩くツールが GitHub に上がっている
- 負荷テストツール JMeter 用のテストシナリオを自動生成
  - 最近の JMeter はコマンドラインで走る

#### パッケージ

- JAR 吐いて Maven レポジトリに登録するの怠い
- JitPack だと GitHub に登録されている Java コードを自動で JAR にする

#### デプロイ

- 作成済の Docker Image を Kubernates に apply
  - Kubernates 有能だが今回は割愛

### 総括

- GitHub は開発者がいかに楽しく開発するかを考えてくれている会社

___

## 企業開発に役立つGitHubの最新機能

池田 尚史 (GitHub)

### GitHub とは

- The software development platform
- どんな開発が必要になっても GitHub を活用できるように
- 10 年間に書かれたコード量は 500TB
- 昨年一年間のコミット数は 15 億
- 10 年間でマージされたプルリクは 1 億
- 85% のプルリクは Private
  - おおよそ企業のもの

### 企業利用

- Business Hosted は SAML 使える
- Enterprise はオンプレ
  - 監査ログや運用監視の機能
- どちらもエンドユーザー視点では (.com も含めて) 同じ機能

### 基本機能

- GitHub Flow
- プルリク
- 各種ツール連携

### 企業利用に役立つ機能 (おおよそ過去半年)

#### Platform

- Security Alert/Dependency Graph
- Checks API
- Outlook
  - 今は .com のみ

#### Administration

- Archieving Repositories
- Legal Hold
  - 通常 GHE はレポジトリ削除後 90 日経つと完全に削除される
  - ディスクからのレポジトリ削除を防ぐ
    - 特定の org/user に紐付く
    - 訴訟対策にデータもつとか
- High Availability & Backup
  - primary 落ちた際に secondary を昇格させるとか
- Mixed Auth
  - 認証基盤を混ぜる
  - 派遣社員に LDAP 回避するとか
- Hot Patch
  - システム落とさずにパッチ当てる
- 二段階認証

#### Org/Team

- Nested Teams
- Approval flows
  - Team メンバ追加時に approval 入る
- Team Discussions
- Permissions
  - メンバの初期権限
  - Fork 可否
  - 二段階認証強制
- Protected Branches
  - レビュワー必須とか CI 強制とか署名必須とか特定のチームだけがマージとか

#### Developer

- Projects 自動化
- 進捗ビジュアライズ
  - 緑コンプリート
  - 紫 WIP
  - グレーノータッチ
- 総じて Projects は使える機能になってきた
- issue templates 複数
  - UI は現在 .com のみだが Enterprise 版は近日中に追加
- ナビゲーション追加
  - Ruby/Go/JavaScript/Python など対応
  - 今後も増える
- コメント編集履歴
  - .com のみだが Enterprise 版にも近日中に

### 変更を追うには

- [GitHub Changelog](https://blog.github.com/)

___

## GitHub Enterpriseアドミンパネルディスカッション

テレル・ブルーマ (GitHub), 伊集院 圭介 (ブラザー工業株式会社), 井内 聡 (フリュー株式会社), サマーズ ハリス 和弘 (楽天株式会社)

### about

#### 伊集院

- ブラザーのソフトウェアエンジニア
- 現在は T シャツに直接印刷するようなプリンタを開発中

#### 井内

- フリューでプリクラの開発中

#### サマーズハリス

- 楽天でインフラ担当

### GHE 導入時点

- なぜ導入した？
  - インフラを自動的にデプロイする仕組みにうまく合致 (サマーズハリス＠楽天)
  - システム的な問題と SW 開発者の思いによる (伊集院＠ブラザー)
    - システムの保守が切れるタイミングで更新難しそうだったし Win でしか使えないシステムだったのでリプレース
    - 開発者が GitHub をそのまま好んでいた, 他社が GHE 導入に積極的な時期だったので SlideShare とか見て憧れていた
      - かっこいいし導入が社員のやる気にも繋がる
        - Octocat :octocat: かわいいのも理由の一つ
  - 導入は一年三ヶ月くらい前, SVN + Redmine でレビューするのは煩雑で効率化したかった (井内＠フリュー)
    - 世界的な情勢見ても SVN でなく Git だった
    - コードクラウドに置きたくない会社なのでオンプレな GHE
- 導入時に苦労したことは？どう乗り越えた？
  - SVN から載せ替え, ログの移行は簡単だったが外部参照できなくて苦労したが submodule で擬似的に置き換え (井内＠フリュー)
    - レポジトリの構造を合わせて変えた
    - Git 導入時の学習にも苦労した
  - マイナーなシステムからの移行だったので情報が少なかった (伊集院＠ブラザー)
    - ツール途中で止まるのでしょうがなく手作業したり
    - Git (Hub) に関心のないエンジニアも大量にいて彼らに移行を促すのが大変だった
    - 多くのチームは自分たちで調べてプルリク使いたいって進んでくれた
      - 自発的に進んだので教育にはそれほど苦労せず
  - 興味が出次第使わせたがライセンス管理面倒, 各プロジェクトがクローズ前提で運営されていたのでトークン隠せとかした (サマーズハリス＠楽天)

### GHE 導入後

- 導入後に何が変わった？
  - GHE 移行後にブランチ戦略を自発的に見つけてきて方向決めてくれた (伊集院＠ブラザー)
    - プルリク使えと言わなかったけど各チームが勝手に使い始めてレビュー文化が勝手に定着した
    - 自分たちで動いてより良くしていくという文化ができた
  - チームに直接編集依頼してたけどプルリク投げるだけになった, 互いにチーム横断してプルリクが飛び交う (サマーズハリス＠楽天)
  - コードオープンになって要求や仕様やコードの共有ができるようになった (井内＠フリュー)
- 管理していて困ったことは？
  - SW ではまったく困らなかった(伊集院＠ブラザー)
    - 管理者権限もっていると全部見えてしまうので権限正しいか確認できない
  - サーバートラブルは皆無, Git の勉強コスト高めだった (井内＠フリュー)
    - うっかり他人の変更消すとか
    - レビュー必須になったぶん緊急時の対応が遅くなった
      - 先にマージして後からレビューする場合がある
  - 権限管理利用にインターフェース設定したのにアップデートしたら消えた (サマーズハリス＠楽天)
- 管理者から見て GHE の良い点は？
  - 安定していて落ちない, 日本語サポート対応して頂ける (井内＠フリュー)
  - 安定していて落ちない (サマーズハリス＠楽天)
    - Docker 内だから動くだろと思ったのに落ちる場合がある
    - VM で動かしてるのに全く落ちない, 電源入れるだけ
    - ドキュメンテーション読み易いのでユーザーに直接投げられる
- ユーザーの反応は？
  - 良好, 高速に作業できる, 社内から隔離された社内ネットワークで作業する場合があり, Git 故にそれに対するコミットが新たにできるようになった, Git 管理なので検索製高くコードの共有ができる (伊集院＠ブラザー)
    - デバイスに関するコードは検索しても見つからない
  - 使うと戻れなくなる (サマーズハリス＠楽天)
  - レポジトリ跨いだ検索ができる, 非推奨関数使ってる箇所を一斉検索できた, 使うと戻れなくなる (井内＠フリュー)

### Q&A

- 運用楽とのことだがユーザー監視したり統計とったりって部分はなにか工夫してる？
  - 統計は見れるページがあるが自社モニタリングシステムに投げるなら設定弄って投げる (サマーズハリス＠楽天)
- 導入する人にアドバイスを
  - プルリクは採用する大きなメリットになる (井内＠フリュー)
  - 競合とちゃんと比べても良い, それでも結局安定性などで GHE に帰結するだろう (伊集院＠ブラザー)
    - 質問 1-2h で返ってくる
    - 多機能

___
